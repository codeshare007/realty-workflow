<div>
    <div class="row mt-3 listing-filters">
        <div class="col-6">
            <div class="col-12">
                <div class="row">
                    <div class="col-4 mb-4" [hidden]="!advancedFiltersAreShown">
                        <div class="form-goup">
                            <label for="streetNameFilter"> Street Name
                                <input type="text" class="form-control" name="streetNameFilter"
                                    [(ngModel)]="input.streetName" />
                            </label> </div>
                    </div>
                    <div class="col-4 mb-4" [hidden]="!advancedFiltersAreShown">
                        <div class="form-goup">
                            <label for="streetNumberFilter">Street Number
                                <input type="text" class="form-control" name="streetNumberFilter"
                                    id="streetNumberFilter" [(ngModel)]="input.streetNumber" />
                            </label> </div>
                    </div>
                    <div class="col-4 mb-4" [hidden]="!advancedFiltersAreShown">
                        <div class="form-goup">
                            <label for="zip"> Zip
                                <input type="text" class="form-control" name="zip"
                                    [(ngModel)]="input.zip" />
                            </label> </div>
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="row">
                    <div class="col-xl-4 mb-4" [hidden]="!advancedFiltersAreShown">
                        <div class="form-goup">
                            <label for="minimalrent">Minimal Rent
                                <input type="number" class="form-control" name="minimalrent"
                                    id="minimalrent" [(ngModel)]="input.minimalRent" />
                            </label> </div>
                    </div>
                    <div class="col-xl-4 mb-4" [hidden]="!advancedFiltersAreShown">
                        <div class="form-goup">
                            <label for="MaximalRent"> Maximal Rent
                                <input type="number" class="form-control" name="MaximalRent"
                                    [(ngModel)]="input.maximalRent" />

                            </label> </div>
                    </div>
                    <div class="col-xl-4 mb-4" [hidden]="!advancedFiltersAreShown">
                        <div class="form-goup">
                            <label for="Bathrooms">Bathrooms
                                <input type="number" class="form-control" name="Bathrooms" id="Bathrooms"
                                    [(ngModel)]="input.bathrooms" />
                            </label> </div>
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="row">
                    <div class="col-xl-4 mb-4" [hidden]="!advancedFiltersAreShown">
                        <div class="form-goup">
                            <label for="Bedrooms"> Bedrooms
                                <input type="number" class="form-control" name="Bedrooms"
                                    [(ngModel)]="input.minimumBedrooms" />

                            </label> </div>
                    </div>
                    <div class="col-xl-4 mb-4" [hidden]="!advancedFiltersAreShown">
                        <div class="form-goup">
                            <label for="AvailableFrom"> Available From
                                <input type="text" bsDatepicker class="form-control" name="AvailableFrom"
                                    id="AvailableFrom" [(ngModel)]="input.availableFrom" />
                            </label> </div>
                    </div>
                    <div class="col-xl-4 mb-4" [hidden]="!advancedFiltersAreShown">
                        <div class="form-goup">
                            <label for="AvailableTo"> Available To
                                <input type="text" bsDatepicker class="form-control" name="AvailableTo"
                                    id="AvailableTo" [(ngModel)]="input.availableTo" />
                            </label> </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-2">
            <div class="row" [hidden]="!advancedFiltersAreShown">
                <div class="form-goup">
                    <label style="margin-bottom: 0;">{{"Pets" | localize}}:</label>
                    <div class="checkbox-inline" *ngFor="let petsFilter of petsFilters">
                        <label [for]="'petsFilter' + petsFilter.value" class="checkbox">
                            <input [id]="'petsFilter' + petsFilter.value" type="checkbox"
                                [name]="'petsFilter' + petsFilter.value" [(ngModel)]="petsFilter.checked">
                            <span></span>
                            {{ petsFilter.label }}
                        </label>
                    </div>
                </div>
            </div>
            <div class="row" [hidden]="!advancedFiltersAreShown">
                <div class="form-goup">
                    <label style="margin-bottom: 0;">{{"Media" | localize}}:</label>
                    <div class="checkbox-inline" *ngFor="let mediaFilter of mediaFilters">
                        <label [for]="'mediaFilter' + mediaFilter.value" class="checkbox">
                            <input [id]="'mediaFilter' + mediaFilter.value" type="checkbox"
                                [name]="'mediaFilter' + mediaFilter.value"
                                [(ngModel)]="mediaFilter.checked">
                            <span></span>
                            {{ mediaFilter.label }}
                        </label>
                    </div>
                </div>
            </div>
            <div class="row" [hidden]="!advancedFiltersAreShown">
                <div class="form-goup">
                    <label style="margin-bottom: 0;">{{"Status" | localize}}:</label>
                    <div class="checkbox-inline" *ngFor="let statusFilter of statusFilters">
                        <label [for]="'statusFilter' + statusFilter.value" class="checkbox">
                            <input [id]="'statusFilter' + statusFilter.value" type="checkbox"
                                [name]="'statusFilter' + statusFilter.value"
                                [(ngModel)]="statusFilter.checked">
                            <span></span>
                            {{ statusFilter.label }}
                        </label>
                    </div>
                </div>
            </div>

        </div>
        <div class="col-4" [hidden]="!advancedFiltersAreShown">
            <div class="row">
                <mat-form-field class="example-chip-list">
                    <mat-chip-list #chipList aria-label="Fruit selection">
                        <mat-chip *ngFor="let city of selectedCities" [selectable]="true" [removable]="true"
                            (removed)="removeCity(city)">
                            {{city}}
                            <mat-icon matChipRemove>cancel</mat-icon>
                        </mat-chip>
                        <input placeholder="Cities..." #citiesFilterInput [formControl]="cityCtrl"
                            [matAutocomplete]="auto" [matChipInputFor]="chipList"
                            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                            (matChipInputTokenEnd)="add($event)">
                    </mat-chip-list>
                    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectCity($event)">
                        <mat-option *ngFor="let city of filteredCities | async" [value]="city">
                            {{city}}
                        </mat-option>
                    </mat-autocomplete>
                </mat-form-field>

            </div>
        </div>
        <!-- 
    <div class="checkbox-inline">
        <label for="EditUser_SetRandomPassword" class="checkbox">
            <input id="EditUser_SetRandomPassword" type="checkbox" name="SetRandomPassword"
                [(ngModel)]="setRandomPassword">
            <span></span>
            {{"SetRandomPassword" | localize}}
        </label>
    </div> -->



    </div>
    <div>
        <!-- <ngx-tags-input name="tags" [(ngModel)]="citiefFilters" [displayField]="'label'"
        (onTagsChanged)="getListings()">
    </ngx-tags-input> -->
    </div>
    <div class="row">
        <div class="col-xl-4 mb-4" style="padding-top: 8px;">

            <span class="clickable-item text-muted" *ngIf="!advancedFiltersAreShown"
                (click)="advancedFiltersAreShown=!advancedFiltersAreShown"><i class="fa fa-angle-down"></i>
                {{"ShowAdvancedFilters" | localize}}</span>
            <span class="clickable-item text-muted" *ngIf="advancedFiltersAreShown"
                (click)="advancedFiltersAreShown=!advancedFiltersAreShown"><i class="fa fa-angle-up"></i>
                {{"HideAdvancedFilters" | localize}}</span>
        </div>
        <div class="col-xl-8 mb-4 d-flex justify-content-end">
            <button class="btn btn-secondary" (click)="clearFilters()">
                {{"Clear" | localize}}</button>
            <button class="btn btn-primary" (click)="getListings(undefined)"><i class="fa fa-sync"></i>
                {{"Refresh" | localize}}</button>
        </div>
    </div>
    <div class="primeng-datatable-container" >
        <p-table #dataTable sortMode="multiple" (onLazyLoad)="getListings($event)"
            [value]="primengTableHelper.records" [lazy]="true" [scrollable]="true" ScrollWidth="100%"
            [responsive]="primengTableHelper.isResponsive"
            [resizableColumns]="primengTableHelper.resizableColumns">
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="city">
                        {{'City' | localize}}
                        <p-sortIcon field="city"></p-sortIcon>
                    </th>
                    <th pSortableColumn="address">
                        {{'Adress' | localize}}<p-sortIcon field="address"></p-sortIcon>
                    </th>
                    <th>
                        {{'Unit' | localize}}
                    </th>
                    <th pSortableColumn="rent">
                        {{'Rent' | localize}} <p-sortIcon field="rent"></p-sortIcon>
                    </th>
                    <th pSortableColumn="beds">
                        {{'Bed' | localize}} <p-sortIcon field="beds"></p-sortIcon>
                    </th>
                    <th pSortableColumn="baths">
                        {{'Bath' | localize}} <p-sortIcon field="baths"></p-sortIcon>
                    </th>
                    <th>
                        {{'Fee' | localize}}
                    </th>

                    <th pSortableColumn="availDate">
                        {{'AvailableDate' | localize}} <p-sortIcon field="availDate"></p-sortIcon>
                    </th>

                    <th pSortableColumn="updateDate">
                        {{'Updated' | localize}} <p-sortIcon field="updateDate"></p-sortIcon>
                    </th>
                    <th>
                        {{'Action' | localize}}
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-record="$implicit">
                <tr>
                    <td>
                        <span class="ui-column-title"> {{'City' | localize}}</span>
                        <span>
                            {{record.city}}
                        </span>
                    </td>
                    <td>
                        <span class="ui-column-title"> {{'Adress' | localize}}</span>
                        <span>
                            {{record.streetName}} {{record.streetNumber}}
                        </span>
                    </td>
                    <td>
                        <span class="ui-column-title"> {{'Unit' | localize}}</span>
                        <span>
                            <i class="fa fa-hashtag"></i>
                            {{record.unit}}
                        </span>
                    </td>
                    <td>
                        <span class="ui-column-title"> {{'Rent' | localize}}</span>
                        <span>
                            <i class="fa fa-usd"></i>
                            {{record.price}}
                        </span>
                    </td>
                    <td>
                        <span class="ui-column-title"> {{'Bed' | localize}}</span>
                        <span>
                            <i class="fa fa-bed"></i>
                            {{record.bedInfo}}
                        </span>
                    </td>
                    <td>
                        <span class="ui-column-title"> {{'Bath' | localize}}</span>
                        <span>
                            <i class="fa fa-bath"></i>
                            {{record.baths}}
                        </span>
                    </td>
                    <td>
                        <span class="ui-column-title"> {{'Fee' | localize}}</span>
                        <span>
                            {{record.fee}}
                        </span>
                    </td>
                    <td>
                        <span class="ui-column-title"> {{'AvailableDate' | localize}}</span>
                        <span>
                            {{record.availableDate}}
                        </span>
                    </td>
                    <td>
                        <span class="ui-column-title"> {{'Updated' | localize}}</span>
                        <span>
                            {{fromNow(record.updateDate)}}
                        </span>
                    </td>
                    <td class="forms-library-table__actions">
                        <span class="ui-column-title">
                            {{ 'Actions' | localize }}
                        </span>
                        <span class="forms-library-table__actions__block">
                            <div class="forms-library-table__actions__block__checkbox">
                                <label>
                                    <input [ngModel]="record.isChecked"
                                           (ngModelChange)="onLisingSelectionToggle(record)"
                                           [ngClass]="{ 'checked': record.isChecked}"
                                           [checked]="record.isChecked ? true : false"
                                           type="checkbox"
                                           [name]="'isChecked' + record.id" />
                                    <span></span>
                                </label>
                            </div>
                            
                        </span>
                    </td>

                </tr>
            </ng-template>
        </p-table>

        <div class="primeng-paging-container">
            <p-paginator [rows]="primengTableHelper.defaultRecordsCountPerPage" #paginator
                (onPageChange)="getListings($event)" [totalRecords]="primengTableHelper.totalRecordsCount"
                [rowsPerPageOptions]="primengTableHelper.predefinedRecordsCountPerPage">

            </p-paginator>
            <span class="total-records-count">
                {{'TotalRecordsCount' | localize:primengTableHelper.totalRecordsCount}}
            </span>
        </div>
    </div>
</div>
